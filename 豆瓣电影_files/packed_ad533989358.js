(function(c){var e,a,d,b;e=(function(){var h,l,f,i,g,k,j,m;l=function(n,p,o){if(n.addEventListener){n.addEventListener(p,o,false)}else{if(n.attachEvent){n.attachEvent("on"+p,o)}else{n["on"+p]=o}}};f=function(p,n){n.parentNode.removeChild(n);c[p]=undefined;try{delete c[p]}catch(o){}};i=function(p,q){var r="",n,o;for(n in p){if(p.hasOwnProperty(n)){n=q?encodeURIComponent(n):n;o=q?encodeURIComponent(p[n]):p[n];r+=n+"="+o+"&"}}return r.replace(/&$/,"")};g=function(){var q="",p=[],n="0123456789ABCDEF",o=0;for(o=0;o<32;o+=1){p[o]=n.charAt(Math.floor(Math.random()*16))}p[12]="4";p[16]=n.charAt((p[16]&3)|8);q="erebor_"+p.join("");return q};k=function(o,n){if(typeof o!=="undefined"){o(n)}};j=function(p,o,n){if(typeof p!=="undefined"){p(o,n)}};m=function(n){if(typeof n!=="undefined"){n()}};h={};h.get=function(q){q=q||{};var p=q.url,t=q.query||{},r=q.callbackParameter||"callback",u=g(),o=c.document.createElement("script"),n=c.document.getElementsByTagName("script")[0],s="?";if(typeof p==="undefined"){throw new Error("URL must be specified!")}t[r]=u;if(p.indexOf("?")>=0){s="&"}p+=s+i(t,true);c[u]=function(v){if(typeof v==="undefined"){k(q.error,"Invalid JSON data returned")}else{j(q.success,t,v)}f(u,o);m(q.complete)};o.setAttribute("src",p);n.parentNode.insertBefore(o,n);l(o,"error",function(){f(u,o);m(q.complete);k(q.error,"Error while trying to access the URL")})};return h})();b=function(f){if(c.console){c.console.log(f)}};a=function(f){while(f){if(f===c.document){return true}f=f.parentNode}return false};d=function(k,n){k=k||{};n=n||{};var m=k.unit||"",i=n.msg,j=n.html||"",f=n.width||0,o=n.height||0,l=n.type||0,h=c.document.getElementById(m),g=c.document.getElementById(m+"_frame");if(typeof i!=="undefined"){b(i);return}if(!a(h)){b("Cannot find slot "+m);return}if(!a(g)){g=c.document.createElement("iframe");g.id=m+"_frame";g.className="mb20";g.frameBorder=0;g.scrolling="no";g.style.overflow="hidden";g.width=f;g.height=o;h.appendChild(g)}g.contentWindow.document.open();g.contentWindow.document.write(j);g.contentWindow.document.close()};(function(){var h=c.DoubanAdRequest||{},o=c.DoubanAdSlots||[],f=h.src||"",l=h.uid||"",k=h.bid||"",n=h.ip||"",p=h.crtr||"",m=h.prv||"",g=h.debug||false,r,q;if(f===""){throw new Error("Ad service url must be specified!")}if(k===""){throw new Error("Browser id must be specified!")}if(m!==""){f=f+"preview/"}if(o.length>0){for(var j=0;j<o.length;j++){r=c.document.getElementById(o[j]);if(a(r)){q={unit:o[j],uid:l,bid:k,ip:n,crtr:p,prv:m,debug:g};e.get({url:f,query:q,success:d,error:b})}else{b("Nonexistent slot "+o[j])}}}else{throw new Error("At least one slot must be specified!")}})()})(this);