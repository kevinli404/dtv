(function(d,c){$window=d(c),d.fn.lazyload=function(h){function a(){var e=0;g.each(function(){var f=d(this);if(b.skip_invisible&&!f.is(":visible")){return}if(!d.abovethetop(this,b)&&!d.leftofbegin(this,b)){if(!d.belowthefold(this,b)&&!d.rightoffold(this,b)){f.trigger("appear")}else{if(++e>b.failure_limit){return !1}}}})}var g=this,b={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:c,data_attribute:"original",skip_invisible:!0,appear:null,load:null};return h&&(undefined!==h.failurelimit&&(h.failure_limit=h.failurelimit,delete h.failurelimit),undefined!==h.effectspeed&&(h.effect_speed=h.effectspeed,delete h.effectspeed),d.extend(b,h)),$container=b.container===undefined||b.container===c?$window:d(b.container),0===b.event.indexOf("scroll")&&$container.bind(b.event,function(e){return a()}),this.each(function(){var e=this,f=d(e);e.loaded=!1,f.one("appear",function(){if(!this.loaded){if(b.appear){var i=g.length;b.appear.call(e,i,b)}d("<img />").bind("load",function(){f.hide().attr("src",f.data(b.data_attribute))[b.effect](b.effect_speed),e.loaded=!0;var k=d.grep(g,function(l){return !l.loaded});g=d(k);if(b.load){var j=g.length;b.load.call(e,j,b)}}).attr("src",f.data(b.data_attribute))}}),0!==b.event.indexOf("scroll")&&f.bind(b.event,function(i){e.loaded||f.trigger("appear")})}),$window.bind("resize",function(e){a()}),a(),this},d.belowthefold=function(f,b){var a;return b.container===undefined||b.container===c?a=$window.height()+$window.scrollTop():a=$container.offset().top+$container.height(),a<=d(f).offset().top-b.threshold},d.rightoffold=function(f,b){var a;return b.container===undefined||b.container===c?a=$window.width()+$window.scrollLeft():a=$container.offset().left+$container.width(),a<=d(f).offset().left-b.threshold},d.abovethetop=function(f,b){var a;return b.container===undefined||b.container===c?a=$window.scrollTop():a=$container.offset().top,a>=d(f).offset().top+b.threshold+d(f).height()},d.leftofbegin=function(f,b){var a;return b.container===undefined||b.container===c?a=$window.scrollLeft():a=$container.offset().left,a>=d(f).offset().left+b.threshold+d(f).width()},d.inviewport=function(a,e){return !d.rightofscreen(a,e)&&!d.leftofscreen(a,e)&&!d.belowthefold(a,e)&&!d.abovethetop(a,e)},d.extend(d.expr[":"],{"below-the-fold":function(a){return d.belowthefold(a,{threshold:0,container:c})},"above-the-top":function(a){return !d.belowthefold(a,{threshold:0,container:c})},"right-of-screen":function(a){return d.rightoffold(a,{threshold:0,container:c})},"left-of-screen":function(a){return !d.rightoffold(a,{threshold:0,container:c})},"in-viewport":function(a){return !d.inviewport(a,{threshold:0,container:c})},"above-the-fold":function(a){return !d.belowthefold(a,{threshold:0,container:c})},"right-of-fold":function(a){return d.rightoffold(a,{threshold:0,container:c})},"left-of-fold":function(a){return !d.rightoffold(a,{threshold:0,container:c})}})})(jQuery,window);